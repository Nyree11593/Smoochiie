<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Shop Characters - Smoochiie</title>

  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg-dark: #0a0a0f;
      --red-gradient-start: #650304;
      --red-gradient-end: #a31e1e;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-dark);
      background: linear-gradient(135deg, #0a0a0f 0%, #15151e 50%, #0a0a0f 100%);
      color: #e8e8ea;
      overflow-x: hidden;
      min-height: 100vh;
    }
    nav {
      background: rgba(10, 10, 15, 0.9);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .container-custom {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      position: relative;
      z-index: 10;
    }
    .text-gradient-red {
      background: linear-gradient(180deg, var(--red-gradient-start), var(--red-gradient-end));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 15px rgba(163, 30, 30, 0.5));
    }
    .page-content {
      display: flex;
      align-items: flex-start;
      gap: 30px;
      padding: 40px 20px;
      max-width: 1400px;
      margin: 0 auto;
    }
    aside {
      width: 280px;
      flex-shrink: 0;
      background: #15151e;
      border: 3px solid #000;
      box-shadow: 6px 6px 0px #000;
      border-radius: 12px;
      padding: 20px;
      font-size: 14px;
      color: #e8e8ea;
      height: fit-content;
      position: sticky;
      top: 100px;
    }
    aside h3 {
      font-weight: 900;
      margin-bottom: 12px;
      text-transform: uppercase;
      color: var(--red-gradient-end);
      margin-top: 20px;
      font-size: 14px;
    }
    aside h3:first-child { margin-top: 0; }
    aside label {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      cursor: pointer;
      font-size: 13px;
    }
    aside input[type="checkbox"] {
      accent-color: var(--red-gradient-end);
    }
    .character-grid {
      flex-grow: 1;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      align-items: start;
    }
    .card {
      background: #15151e;
      border: 3px solid #000;
      box-shadow: 6px 6px 0px #000;
      border-radius: 12px;
      padding: 12px;
      text-align: center;
      position: relative;
      color: #e8e8ea;
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    .image-container {
      width: 100%;
      height: 180px;
      background: #0a0a0f;
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }
    .card img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .card .label {
      position: absolute;
      top: 8px;
      left: 8px;
      background: var(--red-gradient-end);
      color: #000;
      font-size: 10px;
      font-weight: 900;
      padding: 2px 6px;
      border-radius: 6px;
      text-transform: uppercase;
    }
    .card .name {
      font-weight: 900;
      font-size: 13px;
      text-transform: uppercase;
      margin-bottom: 5px;
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card .price {
      font-weight: 700;
      font-size: 14px;
      color: var(--red-gradient-end);
      margin-bottom: 10px;
    }
    .add-btn, .open-modal-btn {
      display: block;
      width: 100%;
      background: #a31e1e;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 8px;
      font-weight: 900;
      text-transform: uppercase;
      font-size: 11px;
      cursor: pointer;
      margin-top: auto;
    }
    .add-btn:hover, .open-modal-btn:hover { background: #c52525; }
    #cart-count {
      position: absolute;
      top: -8px;
      right: -10px;
      background: #a31e1e;
      color: white;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      font-weight: 900;
      transition: transform 0.2s;
    }
    #mini-cart {
      position: absolute;
      top: 100%;
      right: 0;
      width: 350px;
      background: rgba(15, 15, 20, 0.98);
      backdrop-filter: blur(15px);
      border: 1px solid #333;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      padding: 20px;
      display: none;
      z-index: 1000;
      margin-top: 10px;
      color: white;
      border-radius: 12px;
    }
    .cart-item-mini {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid #222;
    }
    .cart-item-mini img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border: 1px solid #444;
      border-radius: 8px;
    }
    .cart-item-info h4 {
      font-size: 0.85rem;
      font-weight: 900;
      text-transform: uppercase;
      margin: 0;
    }
    .cart-item-info p {
      font-size: 0.8rem;
      color: #9ca3af;
      margin: 4px 0;
    }
    .proceed-btn {
      width: 100%;
      background: linear-gradient(180deg, var(--red-gradient-start), var(--red-gradient-end));
      color: white;
      font-weight: 900;
      text-transform: uppercase;
      padding: 12px;
      text-align: center;
      display: block;
      margin-top: 15px;
      border: none;
      cursor: pointer;
      border-radius: 8px;
      text-decoration: none;
    }
    .continue-shopping {
      display: block;
      text-align: center;
      font-size: 0.7rem;
      text-transform: uppercase;
      color: #9ca3af;
      margin-top: 10px;
      text-decoration: underline;
      cursor: pointer;
    }
    .swatch { transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s; }
    .swatch:hover { transform: scale(1.1); }
    .swatch.active {
      border-color: #a31e1e !important;
      box-shadow: 0 0 10px rgba(163, 30, 30, 0.8);
      transform: scale(1.2);
    }
    @media (max-width: 768px) {
      .page-content { flex-direction: column; }
      aside { position: static; width: 100%; }
    }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="py-4">
    <div class="container-custom flex justify-between items-center">
      <div class="text-2xl font-black tracking-tighter flex items-center">
        <span class="text-white uppercase">SMOOCHIIE&#8482;</span>
        <span class="text-gradient-red ml-1">&#128139;</span>
      </div>
      <div class="flex space-x-12 font-bold text-xs uppercase tracking-[0.2em] text-gray-400">
        <a class="hover:text-white transition" href="index.html">Home</a>
        <a class="hover:text-white transition font-black text-white" href="shop-characters.html">Shop Characters</a>
        <a class="hover:text-white transition" href="smoochiies_color_vault.html">Color Vault</a>
        <a class="hover:text-white transition" href="refund_policy.html">Refund Policy</a>
        <a class="hover:text-white transition" href="faq.html">FAQ</a>
        <a class="hover:text-white transition" href="about.html">About</a>
        <a class="hover:text-white transition" href="track-order.html">Track Order</a>
      </div>
      <div class="flex items-center space-x-8 text-white">
        <i id="search-btn" class="fas fa-search text-lg cursor-pointer"></i>
        <div class="relative" id="cart-icon-container" style="cursor:pointer">
          <i class="fas fa-shopping-cart text-xl"></i>
          <span id="cart-count">0</span>
          <div id="mini-cart">
            <h3 class="text-sm font-black uppercase mb-4 tracking-widest">Items in your bag</h3>
            <div id="mini-cart-items"></div>
            <div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-800">
              <span class="text-xs font-bold uppercase text-gray-400">Subtotal</span>
              <span class="font-black text-gradient-red" id="mini-cart-subtotal">$0.00</span>
            </div>
            <a class="proceed-btn" href="bag.html">Proceed to Bag</a>
            <span class="continue-shopping" onclick="clearCart()" style="color: #ef4444; margin-bottom: 5px;">Clear Cart</span>
            <span class="continue-shopping">Continue Shopping</span>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="page-content">
    <aside>
      <h3>Category</h3>
      <label><input type="checkbox" value="hospital" /> Hospital Workers</label>
      <div style="padding-left: 16px;">
        <label><input type="checkbox" value="nurse" /> Nurse</label>
        <label><input type="checkbox" value="ultrasound" /> Ultrasound Tech</label>
        <label><input type="checkbox" value="x-ray" /> X-Ray / CT / MRI</label>
        <label><input type="checkbox" value="doctors" /> More In Healthcare</label>
      </div>

      <h3>Fantasy</h3>
      <label><input type="checkbox" value="dragons" /> Dragons</label>
      <label><input type="checkbox" value="vampire" /> Vampire</label>
      <label><input type="checkbox" value="fairies/fae" /> Fairies/Fae</label>
      <label><input type="checkbox" value="mermaids" /> Mermaids</label>
      <label><input type="checkbox" value="witches" /> Witches</label>

      <h3>Smoochiie Originals</h3>
      <label><input type="checkbox" value="caricature" /> Caricature</label>
      <label><input type="checkbox" value="funny" /> Funny</label>
      <label><input type="checkbox" value="chibi series" /> Chibi Series</label>

      <h3>Seasonal/Holidays</h3>
      <label><input type="checkbox" value="christmas" /> Christmas</label>
      <label><input type="checkbox" value="halloween" /> Halloween</label>
      <label><input type="checkbox" value="valentines" /> Valentines Day</label>
      <label><input type="checkbox" value="seasons" /> Seasons</label>

      <h3>Shop By Theme</h3>
      <label><input type="checkbox" value="astrology" /> Astrology</label>

      <h3>Accessories</h3>
      <label><input type="checkbox" value="badge buddies" /> Badge Buddies</label>
      <label><input type="checkbox" value="Beads" /> Beads</label>
    </aside>

    <section class="character-grid">

      <!-- HOSPITAL WORKERS -->
      <div class="card" data-category="hospital nurse">
        <div class="label">HOSPITAL WORKERS</div>
        <div class="image-container">
          <img alt="Nurse" src="images/nurseinprogress.png" />
        </div>
        <div class="name">Nurse In Progress</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="Nurse Character" data-price="14.99" data-image="images/nurseinprogress">Add to Cart</button>
      </div>

      <div class="card" data-category="hospital ultrasound">
        <div class="label">HOSPITAL WORKERS</div>
        <div class="image-container">
          <img alt="Mammographer" src="images/manmadeinvention.png" />
        </div>
        <div class="name">Mammographer</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="Mammographer" data-price="14.99" data-image="images/manmadeinvention.png">Add to Cart</button>
      </div>

      <div class="card" data-category="hospital x-ray">
        <div class="label">HOSPITAL WORKERS</div>
        <div class="image-container">
          <img alt="X-Ray" src="images/skeletoncoffeefx.png" />
        </div>
        <div class="name">X-Ray / CT / MRI</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="X-Ray / CT / MRI" data-price="14.99" data-image="images/skeletoncoffeefx.png">Add to Cart</button>
      </div>

      <!-- FANTASY -->
      <div class="card" data-category="fantasy dragons">
        <div class="label">FANTASY</div>
        <div class="image-container">
          <img alt="Dragon" src="images/dannyanddrogon.png" />
        </div>
        <div class="name">Dragon Character</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="Dragon Character" data-price="14.99" data-image="images/dannyanddrogon.png">Add to Cart</button>
      </div>

      <div class="card" data-category="fantasy vampire">
        <div class="label">FANTASY</div>
        <div class="image-container">
          <img alt="Vampire" src="https://placehold.co/300x300?text=Vampire" />
        </div>
        <div class="name">Vampire Character</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="Vampire Character" data-price="14.99" data-image="https://placehold.co/300x300?text=Vampire">Add to Cart</button>
      </div>

      <!-- SMOOCHIIE ORIGINALS - CARICATURE (with video) -->
      <div class="card" data-category="originals caricature">
  <div class="label">ORIGINALS</div>

  <div class="image-container" style="position:relative;">
    <img alt="Custom Cartoon Caricature" src="images/Family_Cartoon_Caricature.png" class="card-media" style="width:100%; height:100%; object-fit:contain;" />

    <video class="card-media" muted loop playsinline style="display:none; width:100%; height:100%; object-fit:cover; border-radius:8px;">
      <source src="images/cartoon_caricature_vid.MP4" type="video/mp4">
    </video>

    <button onclick="toggleCardMedia(this)" style="
      position:absolute; bottom:8px; right:8px;
      background:rgba(163,30,30,0.85);
      border:none; border-radius:50%;
      width:32px; height:32px;
      cursor:pointer; color:white;
      font-size:14px; display:flex;
      align-items:center; justify-content:center;
      z-index:10;
    ">▶</button>
  </div>

  <div class="name">Custom Cartoon Caricature</div>
  <div class="price">$19.99</div>
  <a href="https://smoochiie.com/custom-badge-reel-themed" class="add-btn" style="text-decoration:none; display:flex; align-items:center; justify-content:center;">Customize Now</a>
</div>

      <div class="card" data-category="original caricature">
  <div class="label">Custom Realistic Caricature</div>

  <div class="image-container" style="position:relative;">
    <img alt="Custom Realistic Caricature" src="images/Realistic_Caricature.png" class="card-media" style="width:100%; height:100%; object-fit:contain;" />

    <video class="card-media" muted loop playsinline style="display:none; width:100%; height:100%; object-fit:cover; border-radius:8px;">
      <source src="images/realistic_caricature_vid.MP4" type="video/mp4">
    </video>

    <button onclick="toggleCardMedia(this)" style="
      position:absolute; bottom:8px; right:8px;
      background:rgba(163,30,30,0.85);
      border:none; border-radius:50%;
      width:32px; height:32px;
      cursor:pointer; color:white;
      font-size:14px; display:flex;
      align-items:center; justify-content:center;
      z-index:10;
    ">▶</button>
  </div>

  <div class="name">Custom Realistic Caricature</div>
  <div class="price">Starting at $19.99</div>
  <a href="https://smoochiie.com/custom-badge-reel-themed" class="add-btn" style="text-decoration:none; display:flex; align-items:center; justify-content:center;">Customize Now</a>
</div>

      <!-- SEASONAL -->
      <div class="card" data-category="seasonal halloween">
        <div class="label">SEASONAL</div>
        <div class="image-container">
          <img alt="Halloween" src="images/dutchman.png" />
        </div>
        <div class="name">Spooky Character</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="Spooky Character" data-price="14.99" data-image="images/dutchman.png">Add to Cart</button>
      </div>

      <div class="card" data-category="seasonal christmas">
        <div class="label">SEASONAL</div>
        <div class="image-container">
          <img alt="Christmas" src="images/dragonschristmas.png" />
        </div>
        <div class="name">Merry Character</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="Merry Character" data-price="14.99" data-image="images/dragonschristmas.png">Add to Cart</button>
      </div>

      <!-- ASTROLOGY -->
      <div class="card" data-category="astrology">
        <div class="label">ASTROLOGY</div>
        <div class="image-container">
          <img alt="Capricorn" src="images/garnetcapricorn.png" />
        </div>
        <div class="name">Capricorn</div>
        <div class="price">Starting at $10.99</div>
        <button class="add-btn open-options-btn" data-name="Capricorn" data-price="14.99" data-image="images/garnetcapricorn.png">Add to Cart</button>
      </div>

      <!-- Accessories -->
      <div class="card" data-category="accessories">
        <div class="label">accessories</div>
        <div class="image-container">
          <img alt="New" src="https://placehold.co/300x300?text=accessories" />
        </div>
        <div class="name">Badge Buddy</div>
        <div class="price">$9.99</div>
        <button class="add-btn open-options-btn" data-name="Badge Buddy" data-price="9.99" data-image="https://placehold.co/300x300?text=badge buddy">Add to Cart</button>
      </div>

    </section>
  </main>

  <!-- SEARCH MODAL -->
  <div id="search-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 10001;">
    <div style="background: #15151e; border: 3px solid #000; box-shadow: 8px 8px 0px #000; padding: 30px; border-radius: 12px; max-width: 500px; width: 90%; position: relative; text-align: center;">
      <span id="close-search" style="position: absolute; top: 10px; right: 15px; cursor: pointer; font-size: 24px; color: white;">&#215;</span>
      <h2 style="font-weight: 900; text-transform: uppercase; color: #a31e1e; margin-bottom: 15px;">Search Characters</h2>
      <input id="search-input" style="width: 100%; padding: 12px; background: #0a0a0f; border: 2px solid #000; border-radius: 8px; color: #fff;" placeholder="Type to search..." type="text" />
    </div>
  </div>

  <!-- PRODUCT OPTIONS MODAL -->
  <div id="cart-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:10000;">
    <div style="background:#111; padding:20px; border-radius:12px; max-width:400px; width:90%; position:relative; text-align:center; border: 3px solid #000; box-shadow: 8px 8px 0px #000;">
      <button id="close-modal" style="position:absolute; top:15px; right:15px; background:none; border:none; color:#fff; font-size:24px; cursor:pointer; font-weight:bold;">&#215;</button>
      <h2 id="modal-name" style="color:#fff; font-weight:900; text-transform:uppercase; margin-bottom:5px; font-size:1.25rem;">Item Name</h2>
      <p id="modal-display-price" style="color:#a31e1e; font-weight:900; font-size:1.2rem; margin-bottom:15px;">$0.00</p>
      <div style="background: #0a0a0f; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #333;">
        <img alt="Item Image" id="modal-img" src="" style="width:120px; height:120px; object-fit:contain; margin:0 auto;"/>
      </div>
      <div style="text-align: left; margin-bottom: 20px;">
        <p style="color:#e8e8ea; font-weight:700; margin-bottom:8px; font-size: 14px; text-transform: uppercase;">Select Option:</p>
        <select id="modal-options" style="width:100%; padding:12px; border-radius:8px; background:#15151e; color:#fff; border:2px solid #000; font-weight:700; cursor:pointer; outline:none;">
          <option value="Badge Reel" data-price="14.99">Badge Reel ($14.99)</option>
          <option value="Custom Badge Reel" data-price="19.99">Custom Badge Reel ($19.99)</option>
          <option value="Phone Grip" data-price="14.99">Phone Grip ($14.99)</option>
          <option value="Magnet" data-price="12.99">Magnet</option>
          <option value="Keychain" data-price="12.99">Keychain ($12.99)</option>
        </select>
      </div>
      <div id="size-container" style="text-align: left; margin-bottom: 20px; display: none;">
        <p style="color:#e8e8ea; font-weight:700; margin-bottom:8px; font-size: 14px; text-transform: uppercase;">Select Size:</p>
        <select id="modal-size" style="width:100%; padding:12px; border-radius:8px; background:#15151e; color:#fff; border:2px solid #000; font-weight:700; cursor:pointer; outline:none;">
          <option value="2x2" data-price="10.99">2x2 ($10.99)</option>
          <option value="3x3" data-price="12.99">3x3 ($12.99)</option>
          <option value="4x4" data-price="14.99">4x4 ($14.99)</option>
        </select>
      </div>
      <div id="color-container" style="text-align: left; margin-bottom: 20px; display: none;">
        <p style="color:#e8e8ea; font-weight:700; margin-bottom:8px; font-size: 14px; text-transform: uppercase;">
          Backing Color: <span id="selected-color-name" style="color:#a31e1e; margin-left:5px;">Black</span>
        </p>
        <div id="color-swatches" style="display: flex; gap: 10px; flex-wrap: wrap;">
          <div class="swatch active" data-color="Black" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #fff;background-color:#000;" title="Black"></div>
          <div class="swatch" data-color="White" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-color:#fff;" title="White"></div>
          <div class="swatch" data-color="Clear" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px dashed #666;background:rgba(255,255,255,0.15);" title="Clear"></div>
          <div class="swatch" data-color="Caught Blushing" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('caught_blushing.png');background-size:cover;background-position:center;" title="Caught Blushing"></div>
          <div class="swatch" data-color="Cocoa Kiss" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('cocoa_kiss.png');background-size:cover;background-position:center;" title="Cocoa Kiss"></div>
          <div class="swatch" data-color="Purple Reign" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('purple_reign.png');background-size:cover;background-position:center;" title="Purple Reign"></div>
          <div class="swatch" data-color="Vixens Kiss" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('vixens_kiss.png');background-size:cover;background-position:center;" title="vixens kiss"></div>
          <div class="swatch" data-color="Power In Pink" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('power_in_pink.png');background-size:cover;background-position:center;" title="Power In Pink"></div>
          <div class="swatch" data-color="Crimson Kiss" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('crimson_kiss.png');background-size:cover;background-position:center;" title="Crimson Kiss"></div>
          <div class="swatch" data-color="Red-y to Smooche" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('red-y_to_smooche.png');background-size:cover;background-position:center;" title="Red-y to Smooche"></div>
          <div class="swatch" data-color="Ocean Current" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('ocean_current.png');background-size:cover;background-position:center;" title="Ocean Current"></div>
          <div class="swatch" data-color="Blue Me A Kiss" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('blue_me_a_kiss.png');background-size:cover;background-position:center;" title="Blue Me A Kiss"></div>
          <div class="swatch" data-color="Savage in Sage" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('savage_in_sage.png');background-size:cover;background-position:center;" title="Savage in Sage"></div>
          <div class="swatch" data-color="Emeralds Embrace" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('emeralds_embrace.png');background-size:cover;background-position:center;" title="Emeralds Embrace"></div>
          <div class="swatch" data-color="Neon Lip Lock" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('neon_lip_lock.png');background-size:cover;background-position:center;" title="Neon Lip Lock"></div>
          <div class="swatch" data-color="Orange Creamsicle" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('orange_creamsicle.png');background-size:cover;background-position:center;" title="Orange Creamsicle"></div>
          <div class="swatch" data-color="Mustarrddd" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('mustarrddd.png');background-size:cover;background-position:center;" title="Mustarrddd"></div>
          <div class="swatch" data-color="Grandmas Kitchen Black" style="width:35px;height:35px;border-radius:50%;cursor:pointer;border:2px solid #333;background-image:url('grandmas_kitchen_black.png');background-size:cover;background-position:center;" title="Grandmas Kitchen Black"></div>
        </div>
        <input type="hidden" id="selected-color-value" value="Black">
      </div>
      <button id="modal-checkout" style="width:100%; padding:14px; background:linear-gradient(180deg, #650304, #a31e1e); color:#fff; font-weight:900; border:2px solid #000; border-radius:8px; cursor:pointer; text-transform:uppercase; letter-spacing:1px; margin-bottom:15px;">Add to Cart</button>
      <button id="modal-continue" style="background:none; color:#a31e1e; border:none; cursor:pointer; font-weight:700; text-transform:uppercase; font-size:12px; text-decoration:underline;">Continue Shopping</button>
    </div>
  </div>

  <!-- SEARCH + FILTER SCRIPT -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const searchBtn = document.getElementById('search-btn');
      const searchModal = document.getElementById('search-modal');
      const closeSearch = document.getElementById('close-search');
      const searchInput = document.getElementById('search-input');
      const checkboxes = document.querySelectorAll('aside input[type="checkbox"]');
      const cards = document.querySelectorAll('.card');

      if (searchBtn && searchModal && closeSearch) {
        searchBtn.addEventListener('click', () => searchModal.style.display = 'flex');
        closeSearch.addEventListener('click', () => searchModal.style.display = 'none');
      }

      function applyFilters() {
        const query = (searchInput?.value || '').toLowerCase();
        const activeTypes = Array.from(checkboxes)
          .filter(i => i.checked)
          .map(i => i.value.toLowerCase());

        cards.forEach(card => {
          const name = card.querySelector('.name').textContent.toLowerCase();
          const category = (card.getAttribute('data-category') || '').toLowerCase();
          const matchesSearch = name.includes(query);
          const matchesType = activeTypes.length === 0 || activeTypes.some(type => category.includes(type));
          card.style.display = (matchesSearch && matchesType) ? 'flex' : 'none';
        });
      }

      if (searchInput) searchInput.addEventListener('input', applyFilters);
      checkboxes.forEach(cb => cb.addEventListener('change', applyFilters));

      const params = new URLSearchParams(window.location.search);
      if (params.has('search') && searchInput) {
        searchInput.value = params.get('search');
        applyFilters();
      }
    });
  </script>

  <script src="cart.js" defer></script>

  <!-- PRODUCT OPTIONS MODAL LOGIC -->
  <script>
    let currentProduct = {};

    function updateModalPrice() {
      const optionSelect = document.getElementById("modal-options");
      const selectedOption = optionSelect.options[optionSelect.selectedIndex];
      const optionValue = selectedOption.value;
      const sizeContainer = document.getElementById("size-container");
      const colorContainer = document.getElementById("color-container");
      const displayPrice = document.getElementById("modal-display-price");

      sizeContainer.style.display = optionValue === "Magnet" ? "block" : "none";
      const needsColor = ["Badge Reel", "Custom Badge Reel", "Phone Grip"].includes(optionValue);
      colorContainer.style.display = needsColor ? "block" : "none";

      let price = 0;
      let selectionDetails = optionValue;

      if (optionValue === "Magnet") {
        const sizeSelect = document.getElementById("modal-size");
        const selectedSize = sizeSelect.options[sizeSelect.selectedIndex];
        price = parseFloat(selectedSize.getAttribute("data-price"));
        selectionDetails = "Magnet (" + selectedSize.value + ")";
      } else {
        price = parseFloat(selectedOption.getAttribute("data-price"));
        if (needsColor) {
          const colorValue = document.getElementById('selected-color-value').value;
          selectionDetails = optionValue + " - " + colorValue;
        }
      }

      displayPrice.textContent = "$" + price.toFixed(2);
      currentProduct.currentCalculatedPrice = price.toFixed(2);
      currentProduct.selectedOption = selectionDetails;
    }

    document.addEventListener('DOMContentLoaded', () => {
      const swatches = document.querySelectorAll('.swatch');
      const selectedColorInput = document.getElementById('selected-color-value');
      const selectedColorName = document.getElementById('selected-color-name');

      if (swatches.length > 0 && selectedColorInput && selectedColorName) {
        swatches.forEach(swatch => {
          swatch.addEventListener('click', function () {
            swatches.forEach(s => s.classList.remove('active'));
            this.classList.add('active');
            const color = this.getAttribute('data-color');
            selectedColorInput.value = color;
            selectedColorName.textContent = color;
            updateModalPrice();
          });
        });
      }

      document.querySelectorAll('.add-btn').forEach(btn => {
        btn.addEventListener("click", function(e) {
          e.preventDefault();
          currentProduct = {
            name: this.getAttribute("data-name"),
            image: this.getAttribute("data-image")
          };
          document.getElementById("modal-name").textContent = currentProduct.name;
          document.getElementById("modal-img").src = currentProduct.image;
          document.getElementById("modal-options").selectedIndex = 0;
          document.getElementById("modal-size").selectedIndex = 0;
          document.querySelectorAll('.swatch').forEach(s => s.classList.remove('active'));
          document.querySelector('.swatch[data-color="Black"]').classList.add('active');
          document.getElementById('selected-color-value').value = "Black";
          document.getElementById('selected-color-name').textContent = "Black";
          updateModalPrice();
          document.getElementById("cart-modal").style.display = "flex";
        });
      });

      document.getElementById("modal-options").addEventListener("change", updateModalPrice);
      document.getElementById("modal-size").addEventListener("change", updateModalPrice);

      document.getElementById("close-modal").addEventListener("click", () => {
        document.getElementById("cart-modal").style.display = "none";
      });

      document.getElementById("modal-continue").addEventListener("click", () => {
        document.getElementById("cart-modal").style.display = "none";
      });

      document.getElementById("modal-checkout").addEventListener("click", function(e) {
        e.preventDefault();
        e.stopPropagation();

        const finalName = currentProduct.name + " (" + currentProduct.selectedOption + ")";
        const finalPrice = currentProduct.currentCalculatedPrice;
        const finalImage = currentProduct.image || "";

        if (!currentProduct.name || !finalPrice) {
          alert("Please select an option first.");
          return;
        }

        // Trigger cart.js exactly once via a hidden button with class add-to-cart-btn
        const hiddenBtn = document.createElement("button");
        hiddenBtn.style.cssText = "display:none;position:absolute;";
        hiddenBtn.className = "add-to-cart-btn";
        hiddenBtn.setAttribute("data-name", finalName);
        hiddenBtn.setAttribute("data-price", finalPrice);
        hiddenBtn.setAttribute("data-image", finalImage);
        document.body.appendChild(hiddenBtn);
        hiddenBtn.click();
        document.body.removeChild(hiddenBtn);

        document.getElementById("cart-modal").style.display = "none";
      });
    });
  </script>

  <!-- VIDEO TOGGLE SCRIPT -->
  <script>
    function toggleCardMedia(btn) {
      const container = btn.closest('.image-container');
      const img = container.querySelector('img.card-media');
      const video = container.querySelector('video.card-media');
      if (video.style.display === 'none') {
        img.style.display = 'none';
        video.style.display = 'block';
        video.play();
        btn.textContent = '⏸';
      } else {
        video.pause();
        video.style.display = 'none';
        img.style.display = 'block';
        btn.textContent = '▶';
      }
    }
  </script>

</body>
</html>
